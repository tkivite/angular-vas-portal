<block-ui>
  <div class="box box-primary">
    <div class="box-body">
      <!-- <div class="row mb-4" *ngIf="currentActive === 'DISABLED'">
        <div class="col">
          <div class="card border-0 box-shadow" widget="">
            <div class="card-header transparent border-0 text-muted">
              <h5 class="mb-0">Access Denied</h5>
            </div>
            <div class="card-block pt-0 widget-body">
              <div class="row">
                <div class="col-xl-12">
                  <div class="alert alert-danger alert-dismissible fade show" role="alert">
                    <button aria-label="Close" class="close" data-dismiss="alert" type="button">
                      <span aria-hidden="true">Ã—</span>
                    </button>
                    <strong>Error!</strong> You Do not have access to this page.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div> -->
      <div widget class="card border-0 box-shadow">
        <div id="cccform" class="container">

          <div class="row form-heading">
            <div class="col-md-1"></div>
            <h4 class="col-md-11">Initiate Pickup by Customer</h4>
          </div>
          <hr>
          <div class="row">


            <div class="col-md-1"></div>
            <form [formGroup]="pickupForm" (ngSubmit)="onSubmit(pickupForm)" class="col-md-11 form-horizontal">

              <fieldset>
                <p>
                  Enter the customer id number. If we find a pending item for pick-up,we will send a verification
                  code to the customer's registered mobile number
                </p>
                <div class="form-group">
                  <label> ID Number</label>

                  <input formControlName="idNumber" class="form-control validation-field" placeholder="Id Number"
                    type="text">
                  <small class="text-danger"
                    *ngIf="pickupForm.get('idNumber').touched && pickupForm.get('idNumber').hasError('required')">Id
                    number is
                    required</small>
                </div>

                <p *ngIf="rsubmitted">Names: {{user_collecting}} </p>
                <p *ngIf="rsubmitted">Mobile: {{userMobileNumber}}</p>

                <p *ngIf="rsubmitted">
                  A verification code has been sent to {{userMobileNumber}}. Input it below to complete the pickup
                  process.
                </p>

                <div class="form-group" *ngIf="!rsubmitted">
                  <button class="btn btn-block btn-primary" (click)="getVerificationCode(pickupForm)">Generate
                    Code</button>
                </div>
                <div class="form-group" *ngIf="rsubmitted">
                  <label> Verification Code </label>

                  <input formControlName="verificationCode" class="form-control validation-field"
                    placeholder="Verification Code" type="text">
                  <small class="text-danger"
                    *ngIf="pickupForm.get('verificationCode').touched && pickupForm.get('verificationCode').hasError('required')">Code
                    is
                    required</small>


                </div>

                <div class="form-group" *ngIf="rsubmitted">
                  <label> Select Items </label>

                  <table class="table table-striped  table-sm row-border hover">
                    <thead>
                      <tr>
                        <th>select</th>
                        <th>Customer</th>
                        <th>Item</th>
                        <th>Pickup type</th>
                        <th>Store</th>
                        <th>Date Released</th>
                        <th>Status</th>
                        <th>Item Code</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let item of customerItems; let i = index" title={{item.id}}>
                        <td><input type="checkbox" value="{{item.id}}" (change)="itemSelected($event)" /> </td>
                        <td>{{item.customer_names}}</td>
                        <td>{{item.item_description}}</td>
                        <td>{{(item.pick_up_type =='store_pickup')?'customer pick up':'lipalater pick up'}}</td>
                        <td>{{item.store}}</td>
                        <td>{{item.created_at | date}}</td>
                        <td>{{item.status}}</td>
                        <td> <input id="{{item.id}}" (mouseout)="itemCodeValues($event)" placeholder="Item Code"
                            type="text"></td>

                        <!--[readonly]="isCodeReadOnly()"-->

                      </tr>
                    </tbody>
                  </table>


                </div>


                <div class="form-group" *ngIf="rsubmitted">
                  <label> Pick up notes </label>
                  <textarea formControlName="pickupNotes" class="form-control validation-field"
                    placeholder="Pickup Notes"></textarea>



                </div>

                <div class="form-group" *ngIf="rsubmitted">
                  <button [disabled]="!pickupForm.valid" class="btn btn-block btn-primary" type="submit">Complete
                    Pickup</button>
                </div>

                <div class="form-group" *ngIf="fsubmittedwitherrors">

                  <h3>No Item was found</h3>

                  <div class="alert alert-md alert-danger">
                    We could not find a pending item with that id number.

                  </div>




                </div>

                <div class="form-group" *ngIf="fnopendingitems">

                  <h3>No pending Items</h3>

                  <div class="alert alert-md alert-danger">
                    We could not find a pending item with that id number. You can try again.

                  </div>
                </div>




              </fieldset>




            </form>
          </div>


          <div class="panel-body" *ngIf="fsubmitted">

            Heee


            <!--form class="form-horizontal" name="cccform" onsubmit="return sendData();" role="form" method="POST" title=""
        enctype="multipart/form-data" style="display: block;">
        <div class="row form-group">
          <label class="control-label col-sm-3" for="title">Customer Id Number:</label>
          <div class="col-sm-4">
            <input type="text" name="idnumber" id="idnumber" class="form-control required" maxlength="255"
              placeholder="enter customer id number">
          </div>
          <div class="col-sm-2">
            <button type="button" name="request" value="Request" onclick="requestCollectionCode()"
              class="btn-primary btn-sm btn-info ">Request Code</button>
          </div>
        </div>

        <div class="row form-group untilCodeisReceived ccc" style="display: none">
          <label class="control-label col-sm-3" for="title">Collection Code:</label>
          <div class="col-sm-4" title="enter customer collection code received on customer's phone">
            <input type="text" name="ccc" id="ccc" class="form-control required" maxlength="255"
              placeholder="enter customer collection code received on customer's phone">
          </div>
          <div class="col-sm-2">
            <button type="button" name="request" value="Confirm" onclick="confirmCollectionCode()"
              class="btn-primary btn-sm btn-info ">Confirm Code</button>
          </div>
        </div>

        <div class="row form-group untilCodeisReceived response" style="display: none">
          <label class="control-label col-sm-3" for="description">Confirmation Response:</label>
          <div class="col-sm-4">
            <span id="confirmation_response"></span>
          </div>
        </div>

        <div class="row form-group untilCodeisReceived" style="display: none">
          <label class="control-label col-sm-3" for="DOB">Customer:</label>
          <div class="col-sm-4">
            <span id="confirmation_customer"></span>
          </div>
        </div>
        <div class="row form-group untilCodeisReceived" style="display: none">
          <label class="control-label col-sm-3" for="DOB">Item(s):</label>
          <div class="col-sm-4">
            <span id="confirmation_item"></span>
          </div>
        </div>

        <div class="row form-group untilCodeisReceived" style="display: none">
          <label class="control-label col-sm-3" for="DOB">Approved Amount:</label>
          <div class="col-sm-4">
            <span id="confirmation_approvedamount"></span>
          </div>
        </div>

        <div class="row form-group untilCodeisReceived" style="display: none">
          <label class="control-label col-sm-3" for="title">Item identification:</label>
          <div class="col-sm-4">
            <input type="text" name="itemid" id="itemid" class="form-control required" maxlength="255"
              placeholder="enter item id/serial number">
          </div>
        </div>

        <div class="row form-group untilCodeisReceived" style="display: none">
          <label class="control-label col-sm-3" for="title">Dispatch Notes:</label>
          <div class="col-sm-4">
            <textarea name="notes" id="notes" class="form-control required" maxlength="255"
              placeholder="enter dispatch notes"></textarea>
          </div>

        </div>

        <div class="row form-group untilCodeisReceived" style="display: none">
          <label class="control-label col-sm-3" for="email"></label>
          <div class="col-sm-7">

            <input type="button" onclick="sendData()" value="Save" class="btn-primary btn-sm btn-success ">
            <button type="button" name="cancel" value="Cancel" onclick="closeForm()"
              class="btn-primary btn-sm btn-danger ">Cancel</button>
            <input type="hidden" name="cell" />
          </div>
        </div>

        <div class="row form-group ">
          <label class="control-label col-sm-3" for="email">Sample Results</label>
          <div class="col-sm-7">
            <input type="button" onclick="toggleValid('3HGRET4BB')" value="Valid" class="btn-sm btn-success ">
            <button type="button" name="cancel" value="Cancel" onclick="toggleInvalid()"
              class="btn-sm btn-danger ">Invalid</button>
            <input type="hidden" name="cell" />
          </div>
        </div>

      </form -->
          </div>
        </div>
      </div>
    </div>
  </div>
</block-ui>
